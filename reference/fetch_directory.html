<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Fetch Tennessee school directory data — fetch_directory • tnschooldata</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fetch Tennessee school directory data — fetch_directory"><meta name="description" content="Downloads and processes school directory data from the Tennessee Department
of Education's School Directory portal (tnschooldirectory.tnedu.gov).
Returns a combined dataset of schools and districts with contact information,
addresses, grade levels, and administrator names."><meta property="og:description" content="Downloads and processes school directory data from the Tennessee Department
of Education's School Directory portal (tnschooldirectory.tnedu.gov).
Returns a combined dataset of schools and districts with contact information,
addresses, grade levels, and administrator names."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tnschooldata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/quickstart.html">Getting Started with tnschooldata</a></li>
    <li><a class="dropdown-item" href="../articles/enrollment_hooks.html">15 Insights from Tennessee School Enrollment Data</a></li>
    <li><a class="dropdown-item" href="../articles/assessment_analysis.html">Tennessee Assessment Data Analysis</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/almartin82/tnschooldata"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Fetch Tennessee school directory data</h1>
      <small class="dont-index">Source: <a href="https://github.com/almartin82/tnschooldata/blob/main/R/fetch_directory.R" class="external-link"><code>R/fetch_directory.R</code></a></small>
      <div class="d-none name"><code>fetch_directory.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Downloads and processes school directory data from the Tennessee Department
of Education's School Directory portal (tnschooldirectory.tnedu.gov).
Returns a combined dataset of schools and districts with contact information,
addresses, grade levels, and administrator names.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fetch_directory</span><span class="op">(</span>end_year <span class="op">=</span> <span class="cn">NULL</span>, tidy <span class="op">=</span> <span class="cn">TRUE</span>, use_cache <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-end-year">end_year<a class="anchor" aria-label="anchor" href="#arg-end-year"></a></dt>
<dd><p>Currently unused. The directory represents the current state
of Tennessee schools and is updated regularly by TDOE. Included for API
consistency with other fetch functions.</p></dd>


<dt id="arg-tidy">tidy<a class="anchor" aria-label="anchor" href="#arg-tidy"></a></dt>
<dd><p>If TRUE (default), returns data in a standardized format with
consistent column names. If FALSE, returns raw column names from the API.</p></dd>


<dt id="arg-use-cache">use_cache<a class="anchor" aria-label="anchor" href="#arg-use-cache"></a></dt>
<dd><p>If TRUE (default), uses locally cached data when available.
Set to FALSE to force re-download from TDOE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tibble with school directory data. Columns include:</p><ul><li><p><code>entity_type</code>: "school" or "district"</p></li>
<li><p><code>state_district_id</code>: District number (from sde_entitynameunique)</p></li>
<li><p><code>state_school_id</code>: School number (accountnumber)</p></li>
<li><p><code>district_name</code>: Name of the school district</p></li>
<li><p><code>school_name</code>: Name of the school (NA for district rows)</p></li>
<li><p><code>school_type</code>: Public, Private, or Charter</p></li>
<li><p><code>instructional_type</code>: Regular, High School, etc.</p></li>
<li><p><code>address</code>: Street address</p></li>
<li><p><code>city</code>: City</p></li>
<li><p><code>state</code>: State (always "TN")</p></li>
<li><p><code>zip</code>: ZIP code</p></li>
<li><p><code>phone</code>: Phone number</p></li>
<li><p><code>county_name</code>: County name</p></li>
<li><p><code>grades_served</code>: Comma-separated grade levels</p></li>
<li><p><code>principal_name</code>: School principal name (from primary contact)</p></li>
<li><p><code>principal_email</code>: School principal email</p></li>
<li><p><code>superintendent_name</code>: District superintendent (from primary contact for districts)</p></li>
<li><p><code>superintendent_email</code>: District superintendent email</p></li>
<li><p><code>website</code>: School or district website URL</p></li>
<li><p><code>status</code>: Active or Inactive</p></li>
<li><p><code>nces_number</code>: NCES identification number</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The directory data is downloaded from the TN School Directory portal, which
is powered by Microsoft Dynamics 365. The API returns JSON data via FetchXML
queries. Schools and districts are fetched separately and combined.</p>
<p>The API paginates results in pages of up to 5000 records. For schools
(~3000 records) pagination is handled automatically.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Get school directory data</span></span></span>
<span class="r-in"><span><span class="va">dir_data</span> <span class="op">&lt;-</span> <span class="fu">fetch_directory</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get raw format (original API field names)</span></span></span>
<span class="r-in"><span><span class="va">dir_raw</span> <span class="op">&lt;-</span> <span class="fu">fetch_directory</span><span class="op">(</span>tidy <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Force fresh download (ignore cache)</span></span></span>
<span class="r-in"><span><span class="va">dir_fresh</span> <span class="op">&lt;-</span> <span class="fu">fetch_directory</span><span class="op">(</span>use_cache <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Filter to active public schools</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">public_schools</span> <span class="op">&lt;-</span> <span class="va">dir_data</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">entity_type</span> <span class="op">==</span> <span class="st">"school"</span>, <span class="va">school_type</span> <span class="op">==</span> <span class="st">"Public"</span>, <span class="va">status</span> <span class="op">==</span> <span class="st">"Active"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Find all schools in Davidson County (Nashville)</span></span></span>
<span class="r-in"><span><span class="va">nashville</span> <span class="op">&lt;-</span> <span class="va">dir_data</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">county_name</span> <span class="op">==</span> <span class="st">"Davidson"</span>, <span class="va">entity_type</span> <span class="op">==</span> <span class="st">"school"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/almartin82" class="external-link">Al Martin</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

